<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate Intent DEV</title>
    <!-- CSS_PLACEHOLDER -->
</head>
<body>
    <div class="container">
        <h1>üå∏ Create Intent DEV (Draft)</h1>

        <div class="auto-save-indicator" id="autoSaveIndicator">
            üíæ Draft auto-saved
        </div>

        <div id="errorMessage" class="error-message">
            <strong>‚ö†Ô∏è Validation errors:</strong>
            <ul id="errorList"></ul>
        </div>

        <form id="intentForm">
            <!-- OBLIGATORIOS -->
            <div class="form-section">
                <label for="name">Intent Name <span class="required">*</span></label>
                <input type="text" id="name" name="name" placeholder="fix-login-crash" required>
                <p class="help-text">Lowercase letters, numbers, hyphens only</p>
            </div>

            <div class="form-section">
                <label for="profileId">Chrome Profile <span class="required">*</span></label>
                <select id="profileId" name="profileId" required>
                    <option value="">-- Select Profile --</option>
                </select>
                <p class="help-text">Profile with active AI session</p>
            </div>

            <!-- profileManager.html -->
            <div class="form-section">
                <label>üìÅ Archivos relevantes</label>
                <div class="file-pills" id="filePills">
                    <!-- Generado din√°micamente -->
                </div>
                <div class="token-counter" id="tokenCounter">
                    <div class="token-bar">
                        <div class="token-fill" id="tokenFill"></div>
                    </div>
                    <div class="token-text" id="tokenText">
                        üìä Token estimate: 0 / 100,000 (0%)
                    </div>
                </div>
            </div>

            <div class="form-section">
                <label for="aiProvider">AI Provider <span class="required">*</span></label>
                <select id="aiProvider" name="aiProvider" required>
                    <option value="">-- Select Provider --</option>
                    <option value="claude">Claude (Anthropic)</option>
                    <option value="grok">Grok (xAI)</option>
                    <option value="chatgpt">ChatGPT (OpenAI)</option>
                    <option value="gemini">Gemini (Google)</option>
                </select>
            </div>

            <div class="form-section">
                <label for="aiAccountId">AI Account <span class="required">*</span></label>
                <select id="aiAccountId" name="aiAccountId" required disabled>
                    <option value="">-- Select provider first --</option>
                </select>
                <p class="help-text" id="accountStatus"></p>
            </div>

            <div class="form-section">
                <label>üìÇ Selected Files <span class="required">*</span></label>
                <div class="file-pills" id="filePills">
                    <!-- Populated by JS -->
                </div>
                <div class="token-counter" id="tokenCounter">
                    <div class="token-bar">
                        <div class="token-fill" id="tokenFill"></div>
                    </div>
                    <div class="token-text" id="tokenText">
                        üìä Token estimate: 0 / 100,000 (0%)
                    </div>
                </div>
            </div>

            <!-- OPCIONALES (sin required) -->
            <div class="form-section">
                <label for="problem">Problem Description (optional)</label>
                <div class="editor-toolbar">
                    <button type="button" class="toolbar-btn" onclick="formatText('bold')">B</button>
                    <button type="button" class="toolbar-btn" onclick="formatText('italic')">I</button>
                    <button type="button" class="toolbar-btn" onclick="formatText('code')">```</button>
                </div>
                <textarea id="problem" name="problem" placeholder="Will be enriched in web UI..."></textarea>
                <p class="help-text">Optional: Add initial context here</p>
            </div>

            <div class="form-section">
                <label for="expectedOutput">Expected Output (optional)</label>
                <textarea id="expectedOutput" name="expectedOutput" placeholder="Will be enriched in web UI..."></textarea>
            </div>

            <div class="button-group">
                <button type="submit" class="btn-primary" id="generateBtn">‚ú® Create Intent DEV</button>
                <button type="button" class="btn-secondary" onclick="cancel()">Cancel</button>
            </div>
        </form>
    </div>
    
    <!-- JS_PLACEHOLDER -->
</body>
</html>