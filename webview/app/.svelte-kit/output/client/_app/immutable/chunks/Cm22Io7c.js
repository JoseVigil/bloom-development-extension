import{F as re,a as se,b as le,C as ie}from"./NGysjSll.js";import{p as ve,a as O,i as ne,J as m,o as C,h as n,I as u,k as oe,u as i,r as o,j as f,t as e,H as T,K as z,d,g as de,n as J,c as pe,L as K,U as ce,V as fe,S as V,W as _e,G as b}from"./OFsEVZk6.js";var he=m('<div class="empty svelte-124nk1e">No files</div>'),ue=m("<!> <!>",1),me=m('<div class="node svelte-124nk1e"><button class="node-button svelte-124nk1e"><!> <span class="name svelte-124nk1e"> </span></button> <!></div>'),ge=m('<div class="file-viewer svelte-124nk1e"><div class="viewer-header svelte-124nk1e"><h3 class="svelte-124nk1e"> </h3> <button class="svelte-124nk1e">Close</button></div> <pre class="viewer-content svelte-124nk1e"> </pre></div>'),ke=m('<div class="loading-overlay svelte-124nk1e">Loading...</div>'),we=m('<div class="file-tree svelte-124nk1e" role="tree"><!></div> <!> <!>',1);function be(M,y){ve(y,!1);let D=O(y,"tree",24,()=>[]),j=O(y,"level",8,0),N=O(y,"mode",8,"explorer"),l=T(new Set),p=T(null),S=T(!1);async function U(a){if(a.type==="directory")e(l).has(a.path)?e(l).delete(a.path):e(l).add(a.path),b(l,e(l));else{b(S,!0);try{b(p,{path:a.path,content:"File content will be loaded here...",extension:a.name.split(".").pop()||""}),typeof window<"u"&&window.vscode&&window.vscode.postMessage({command:"openFile",path:a.path})}catch(r){console.error("Failed to load file:",r),typeof window<"u"&&!window.vscode&&alert("Open in VSCode required")}finally{b(S,!1)}}}function W(a){a.preventDefault()}function A(a){a.preventDefault(),console.log("File dropped:",a.dataTransfer?.files)}ne();var G=we(),g=C(G),B=n(g);{var E=a=>{var r=he();d(a,r)},P=a=>{var r=J(),k=C(r);pe(k,1,D,c=>c.path,(c,t)=>{var _=me(),v=n(_),F=n(v);{var q=s=>{var w=ue(),x=C(w);{var L=h=>{le(h,{size:16})},ae=h=>{ie(h,{size:16})};u(x,h=>{e(l),e(t),i(()=>e(l).has(e(t).path))?h(L):h(ae,!1)})}var te=f(x,2);re(te,{size:16}),d(s,w)},Y=s=>{se(s,{size:16})};u(F,s=>{e(t),i(()=>e(t).type==="directory")?s(q):s(Y,!1)})}var I=f(F,2),Z=n(I,!0);o(I),o(v);var $=f(v,2);{var ee=s=>{var w=J(),x=C(w);{let L=_e(()=>j()+1);be(x,{get tree(){return e(t),i(()=>e(t).children)},get level(){return e(L)},get mode(){return N()}})}d(s,w)};u($,s=>{e(t),e(l),i(()=>e(t).type==="directory"&&e(l).has(e(t).path)&&e(t).children)&&s(ee)})}o(_),K(()=>{ce(_,`padding-left: ${j()*16}px`),fe(v,"aria-label",(e(t),i(()=>e(t).name))),V(Z,(e(t),i(()=>e(t).name)))}),z("click",v,()=>U(e(t))),d(c,_)}),d(a,r)};u(B,a=>{oe(D()),i(()=>D().length===0)?a(E):a(P,!1)})}o(g);var H=f(g,2);{var Q=a=>{var r=ge(),k=n(r),c=n(k),t=n(c,!0);o(c);var _=f(c,2);o(k);var v=f(k,2),F=n(v,!0);o(v),o(r),K(q=>{V(t,q),V(F,(e(p),i(()=>e(p).content)))},[()=>(e(p),i(()=>e(p).path.split("/").pop()))]),z("click",_,()=>b(p,null)),d(a,r)};u(H,a=>{e(p)&&a(Q)})}var R=f(H,2);{var X=a=>{var r=ke();d(a,r)};u(R,a=>{e(S)&&a(X)})}z("dragover",g,W),z("drop",g,A),d(M,G),de()}export{be as F};
