import{z as l}from"./OFsEVZk6.js";import{f as d,g as w,l as f}from"./PsGZJ0l5.js";function h(){const{subscribe:s,set:b,update:o}=l({list:[],current:null,wizardState:"briefing",nucleusPath:""});return{subscribe:s,setNucleusPath(r){o(e=>({...e,nucleusPath:r}))},async load(r){try{let e=r;if(e||(e=(await new Promise(a=>{const u=s(c=>{u(),a(c)})})).nucleusPath),!e)return console.warn("No nucleus path provided"),[];const n=(await f(e)).intents||[];return o(i=>({...i,list:n})),n}catch(e){return console.error("Failed to load intents:",e),[]}},async loadIntent(r,e){try{const t=await w(r,e);o(n=>({...n,current:t}))}catch(t){console.error("Failed to load intent:",t)}},createNew(){const r={id:"new",type:"doc",name:"New Intent",profile:"main",project:"",status:"draft",briefing:{problem:"",expectedOutput:"",currentBehavior:"",desiredBehavior:"",considerations:""},questions:[{label:"Question 1",answer:""},{label:"Question 2",answer:""},{label:"Question 3",answer:""},{label:"Question 4",answer:""},{label:"Question 5",answer:""}],turns:[],files:[]};o(e=>({...e,current:r,wizardState:"briefing"}))},setWizardState(r){o(e=>({...e,wizardState:r}))},async execute(r,e){try{return console.log("Execution started for intent:",r),{status:"started"}}catch(t){throw console.error("Execution failed:",t),t}},async finalize(r,e){try{await d(r,e),console.log("Intent finalized:",r)}catch(t){throw console.error("Finalization failed:",t),t}},async addTurn(r,e){o(t=>t.current&&t.current.id===r?{...t,current:{...t.current,turns:[...t.current.turns||[],e]}}:t),setTimeout(()=>{const t={id:Date.now().toString(),actor:"ai",content:"Processing your request...",timestamp:new Date().toISOString()};o(n=>n.current&&n.current.id===r?{...n,current:{...n.current,turns:[...n.current.turns||[],t]}}:n)},1e3)}}}const y=h();export{y as i};
