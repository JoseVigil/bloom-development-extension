<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Synapse Discovery</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <!-- DISCOVERY SCREEN -->
    <div id="screen-discovery" class="screen active">
      <!-- Status Circle -->
      <div class="status-circle" id="status-circle">
        <div class="circle-checkmark" id="circle-checkmark">‚úì</div>
      </div>
      
      <!-- Title -->
      <h1>Synapse Discovery</h1>
      
      <!-- Profile Name -->
      <p class="profile-name" id="profile-name-display">
        Profile: <span id="profile-alias-text">-</span>
      </p>
      
      <!-- Single Status Line -->
      <div class="status-line" id="status-line">
        <span id="status-text">Inicializando extensi√≥n</span>
      </div>
      
      <!-- Connection Info (single row) -->
      <div class="connection-row" id="connection-row" style="display: none;">
        <span id="profile-info">Profile: -</span>
        <span class="separator">‚Ä¢</span>
        <span id="connected-time">Conectado: -</span>
      </div>
      
      <!-- Countdown Label -->
      <div class="countdown-label" id="countdown-label">
        Esta ventana se cerrar√° en <span id="countdown-value">5</span> segundos
      </div>
      
      <!-- Error Container -->
      <div class="error-container" id="discovery-error">
        <div id="error-message">Error</div>
        <pre id="error-details"></pre>
      </div>
      
      <!-- Hidden progress counter -->
      <div class="debug-info" id="debug-info" style="display: none;">
        Intento: <span id="attempt-count">0</span>
      </div>
    </div>

    <!-- ONBOARDING SCREENS -->
    <div id="screen-onboarding-welcome" class="screen">
      <div class="progress-bar"><div class="progress-fill" style="width: 0%"></div></div>
      <div class="step-indicator">Paso 1 de 3</div>
      <div class="status-icon">üå∏</div>
      <h1>Bienvenido a Bloom</h1>
      <p>Vamos a configurar tu perfil en 2 pasos simples.<br>Necesitar√°s una cuenta de Google y crear una API Key de Gemini.</p>
      <button class="btn" id="btn-start-onboarding">Comenzar</button>
    </div>

    <div id="screen-google-login" class="screen">
      <div class="progress-bar"><div class="progress-fill" style="width: 33%"></div></div>
      <div class="step-indicator">Paso 2 de 3</div>
      <div class="status-icon">üîê</div>
      <h1>Inicia sesi√≥n con Google</h1>
      <p>Necesitamos que inicies sesi√≥n en tu cuenta de Google para continuar.</p>
      <button class="btn" id="btn-google-login">Iniciar sesi√≥n con Google</button>
    </div>

    <div id="screen-google-waiting" class="screen">
      <div class="progress-bar"><div class="progress-fill" style="width: 33%"></div></div>
      <div class="step-indicator">Paso 2 de 3</div>
      <div class="spinner"></div>
      <h1>Esperando inicio de sesi√≥n...</h1>
      <p>Completa el inicio de sesi√≥n en la pesta√±a que se abri√≥.<br>Detectaremos autom√°ticamente cuando hayas iniciado sesi√≥n.</p>
    </div>

    <div id="screen-gemini-api" class="screen">
      <div class="progress-bar"><div class="progress-fill" style="width: 66%"></div></div>
      <div class="step-indicator">Paso 3 de 3</div>
      <div class="status-icon">üîë</div>
      <h1>Crea tu Gemini API Key</h1>
      <div class="info-box">
        <h3>Instrucciones:</h3>
        <ol>
          <li>Haz clic en "Crear API Key" en la nueva pesta√±a</li>
          <li>Copia la clave generada</li>
          <li>La detectaremos autom√°ticamente</li>
        </ol>
      </div>
      <button class="btn" id="btn-open-aistudio">Ir a AI Studio</button>
    </div>

    <div id="screen-gemini-waiting" class="screen">
      <div class="progress-bar"><div class="progress-fill" style="width: 66%"></div></div>
      <div class="step-indicator">Paso 3 de 3</div>
      <div class="spinner"></div>
      <h1>Esperando API Key...</h1>
      <p>Crea y copia tu API Key en AI Studio.<br>La detectaremos autom√°ticamente cuando la copies.</p>
    </div>

    <div id="screen-onboarding-success" class="screen">
      <div class="progress-bar"><div class="progress-fill" style="width: 100%"></div></div>
      <div class="success-checkmark">‚úì</div>
      <h1>¬°Configuraci√≥n completa!</h1>
      <p>Tu perfil est√° listo para usar.<br>Esta ventana se cerrar√° autom√°ticamente.</p>
      <div class="info-box">
        <p><strong>Email:</strong> <span id="final-email">-</span></p>
        <p><strong>API Key:</strong> ‚úì Configurada</p>
      </div>
    </div>
  </div>

  <script src="../discovery.synapse.config.js"></script>
  <script src="discoveryProtocol.js"></script>
  <script src="discovery.js"></script>
</body>
</html>